# WHartTest VitePress åŒç¯å¢ƒéƒ¨ç½²æŒ‡å—

## ğŸ¯ è§£å†³æ–¹æ¡ˆæ¦‚è¿°

ç°åœ¨æ”¯æŒ **GitHub Pages** å’Œ **é¢æ¿** åŒç¯å¢ƒéƒ¨ç½²ï¼Œäº’ä¸å½±å“ï¼

é€šè¿‡ç¯å¢ƒå˜é‡è‡ªåŠ¨åˆ‡æ¢ `base` è·¯å¾„ï¼š
- **GitHub Pages**: `base: '/WHartTest/'` 
- **é¢æ¿**: `base: './'` (ç›¸å¯¹è·¯å¾„)

## ğŸ”§ é…ç½®ä¿®æ”¹è¯´æ˜

### VitePressé…ç½® (`docs/.vitepress/config.mjs`)
```javascript
base: process.env.DEPLOY_TYPE === 'baota' ? './' : '/WHartTest/',
```

### Package.json æ–°å¢è„šæœ¬
```json
"scripts": {
  "docs:build:github": "node deploy-scripts/build-github.js",
  "docs:build:baota": "node deploy-scripts/build-baota.js"
}
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### GitHub Pages éƒ¨ç½²ï¼ˆä¿æŒåŸæœ‰æ–¹å¼ï¼‰
```bash
# ä½¿ç”¨GitHubä¸“ç”¨æ„å»ºè„šæœ¬
npm run docs:build:github

# æˆ–è€…ä½¿ç”¨æ ‡å‡†æ„å»ºï¼ˆé»˜è®¤GitHubé…ç½®ï¼‰
npm run docs:build
```

### é¢æ¿éƒ¨ç½²
```bash
# ä½¿ç”¨å®å¡”ä¸“ç”¨æ„å»ºè„šæœ¬
npm run docs:build:baota
```

## ğŸ“‹ é¢æ¿è¯¦ç»†éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1ï¼šæ„å»ºé¡¹ç›®
```bash
# ä½¿ç”¨å®å¡”ä¸“ç”¨æ„å»º
npm run docs:build:baota
```

### æ­¥éª¤2ï¼šä¸Šä¼ æ–‡ä»¶åˆ°å®å¡”
1. ç™»å½•é¢æ¿
2. è¿›å…¥"æ–‡ä»¶"ç®¡ç†
3. å°† `docs/.vitepress/dist` ç›®å½•ä¸Šä¼ åˆ° `/www/wwwroot/`
4. é‡å‘½åä¸º `wharttest-docs`

### æ­¥éª¤3ï¼šæ·»åŠ ç«™ç‚¹
1. ç‚¹å‡»"ç½‘ç«™" â†’ "æ·»åŠ ç«™ç‚¹"
2. å¡«å†™åŸŸå
3. æ ¹ç›®å½•é€‰æ‹©ï¼š`/www/wwwroot/wharttest-docs`
4. ç‚¹å‡»"æäº¤"

### æ­¥éª¤4ï¼šé…ç½®Nginx
ä½¿ç”¨æä¾›çš„ `baota-nginx.conf` é…ç½®æ–‡ä»¶ï¼Œæˆ–è€…æ‰‹åŠ¨é…ç½®ï¼š

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    root /www/wwwroot/wharttest-docs;
    index index.html;
    
    # å¤„ç†SPAè·¯ç”±
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # é™æ€èµ„æºç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

## ğŸ” å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šæ ·å¼ä»ç„¶åŠ è½½ä¸å‡ºæ¥
- âœ… ç¡®è®¤ä½¿ç”¨äº† `npm run docs:build:baota` æ„å»º
- âœ… æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰404é”™è¯¯
- âœ… ç¡®è®¤Nginxæ ¹ç›®å½•è·¯å¾„æ­£ç¡®

### é—®é¢˜2ï¼šé¡µé¢åˆ·æ–°404
- âœ… ç¡®ä¿Nginxé…ç½®ä¸­æœ‰ `try_files $uri $uri/ /index.html;`

### é—®é¢˜3ï¼šGitHub Pageså¤±æ•ˆ
- âœ… ç¡®è®¤ä½¿ç”¨ `npm run docs:build:github` æ„å»ºGitHubç‰ˆæœ¬
- âœ… ä¸è¦æ··ç”¨æ„å»ºè„šæœ¬

## ğŸ“ é¡¹ç›®ç»“æ„è¯´æ˜

```
WHartTest/
â”œâ”€â”€ docs/                          # VitePressæ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ .vitepress/
â”‚   â”‚   â””â”€â”€ config.mjs            # ä¸»é…ç½®æ–‡ä»¶ï¼ˆæ”¯æŒåŒç¯å¢ƒï¼‰
â”‚   â””â”€â”€ ...                       # æ–‡æ¡£å†…å®¹
â”œâ”€â”€ deploy-scripts/               # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ build-github.js          # GitHub Pagesæ„å»ºè„šæœ¬
â”‚   â””â”€â”€ build-baota.js           # é¢æ¿æ„å»ºè„šæœ¬
â”œâ”€â”€ baota-nginx.conf             # å®å¡”Nginxé…ç½®æ¨¡æ¿
â””â”€â”€ package.json                 # åŒ…å«æ–°çš„æ„å»ºè„šæœ¬
```

## ğŸ’¡ æœ€ä½³å®è·µ

1. **GitHub Pages**: ä½¿ç”¨ `npm run docs:build:github`
2. **é¢æ¿**: ä½¿ç”¨ `npm run docs:build:baota`
3. **æœ¬åœ°å¼€å‘**: ä½¿ç”¨ `npm run docs:dev`

ä¸¤ç§éƒ¨ç½²æ–¹å¼å®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å½±å“ï¼ğŸ‰